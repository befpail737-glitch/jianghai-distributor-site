<svg width="600" height="300" viewBox="0 0 600 300" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="300" y="20" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#374151">
    Energy Storage System (ESS) Power Conversion System
  </text>
  
  <!-- Battery Stack -->
  <rect x="20" y="70" width="80" height="80" fill="#059669" stroke="#047857" stroke-width="2" rx="4"/>
  <text x="60" y="95" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#ffffff">Battery</text>
  <text x="60" y="110" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#ffffff">Stack</text>
  <text x="60" y="125" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#ffffff">400-800V</text>
  <text x="60" y="135" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#ffffff">Li-ion</text>
  
  <!-- DC/DC Converter -->
  <rect x="130" y="80" width="80" height="60" fill="#8b5cf6" stroke="#7c3aed" stroke-width="2" rx="4"/>
  <text x="170" y="105" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#ffffff">DC/DC</text>
  <text x="170" y="120" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#ffffff">Bidirectional</text>
  
  <!-- DC-Link Capacitor Bank (MAIN FOCUS) -->
  <rect x="240" y="50" width="120" height="100" fill="#ef4444" stroke="#dc2626" stroke-width="3" rx="4"/>
  <text x="300" y="75" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#ffffff">DC-Link</text>
  <text x="300" y="90" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#ffffff">Capacitor Bank</text>
  <text x="300" y="105" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#ffffff">Film + Screw Terminal</text>
  <text x="300" y="120" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#ffffff">Multi-MW Rated</text>
  <text x="300" y="135" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#ffffff">⚡ KEY COMPONENT</text>
  
  <!-- Inverter/Rectifier -->
  <rect x="390" y="80" width="80" height="60" fill="#f59e0b" stroke="#d97706" stroke-width="2" rx="4"/>
  <text x="430" y="105" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#ffffff">Inverter</text>
  <text x="430" y="120" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#ffffff">SiC-based</text>
  
  <!-- Grid Connection -->
  <rect x="500" y="80" width="80" height="60" fill="#6366f1" stroke="#4f46e5" stroke-width="2" rx="4"/>
  <text x="540" y="105" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#ffffff">Grid Tie</text>
  <text x="540" y="120" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#ffffff">35kV</text>
  
  <!-- Individual Capacitor Banks -->
  <g>
    <!-- Screw Terminal Bank -->
    <rect x="250" y="160" width="40" height="30" fill="#6b7280" stroke="#4b5563" stroke-width="2" rx="2"/>
    <text x="270" y="175" font-family="Arial, sans-serif" font-size="9" font-weight="bold" text-anchor="middle" fill="#ffffff">Bulk</text>
    <text x="270" y="185" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="#ffffff">Screw</text>
    
    <!-- Film Capacitor Bank -->
    <rect x="300" y="160" width="40" height="30" fill="#3b82f6" stroke="#2563eb" stroke-width="2" rx="2"/>
    <text x="320" y="175" font-family="Arial, sans-serif" font-size="9" font-weight="bold" text-anchor="middle" fill="#ffffff">Film</text>
    <text x="320" y="185" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="#ffffff">HF</text>
  </g>
  
  <!-- System Control -->
  <rect x="130" y="200" width="340" height="40" fill="#6b7280" stroke="#4b5563" stroke-width="2" rx="4"/>
  <text x="300" y="220" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#ffffff">Battery Management System (BMS) + PCS Controller</text>
  <text x="300" y="235" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#ffffff">Grid Sync • Charge/Discharge Control • Safety Protection</text>
  
  <!-- Auxiliary Systems -->
  <rect x="20" y="200" width="80" height="60" fill="#8b5cf6" stroke="#7c3aed" stroke-width="2" rx="4"/>
  <text x="60" y="220" font-family="Arial, sans-serif" font-size="10" font-weight="bold" text-anchor="middle" fill="#ffffff">Auxiliary</text>
  <text x="60" y="235" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#ffffff">Cooling</text>
  <text x="60" y="245" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#ffffff">HVAC</text>
  
  <!-- Aux Power Capacitors -->
  <rect x="25" y="265" width="15" height="10" fill="#10b981" stroke="#059669" stroke-width="1" rx="1"/>
  <text x="32" y="275" font-family="Arial, sans-serif" font-size="7" text-anchor="middle" fill="#059669">24V</text>
  
  <rect x="45" y="265" width="15" height="10" fill="#10b981" stroke="#059669" stroke-width="1" rx="1"/>
  <text x="52" y="275" font-family="Arial, sans-serif" font-size="7" text-anchor="middle" fill="#059669">12V</text>
  
  <rect x="65" y="265" width="15" height="10" fill="#10b981" stroke="#059669" stroke-width="1" rx="1"/>
  <text x="72" y="275" font-family="Arial, sans-serif" font-size="7" text-anchor="middle" fill="#059669">5V</text>
  
  <!-- Power Rating Display -->
  <circle cx="520" cy="200" r="30" fill="#10b981"/>
  <text x="520" y="195" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#ffffff">5MW</text>
  <text x="520" y="205" font-family="Arial, sans-serif" font-size="8" text-anchor="middle" fill="#ffffff">20MWh</text>
  
  <!-- Connection lines -->
  <g stroke="#374151" stroke-width="3" fill="none">
    <!-- Main power flow -->
    <line x1="100" y1="110" x2="130" y2="110"/>
    <line x1="210" y1="110" x2="240" y2="110"/>
    <line x1="360" y1="110" x2="390" y2="110"/>
    <line x1="470" y1="110" x2="500" y2="110"/>
    
    <!-- Capacitor bank connections -->
    <line x1="270" y1="150" x2="270" y2="160"/>
    <line x1="320" y1="150" x2="320" y2="160"/>
    
    <!-- Control connections -->
    <line x1="300" y1="150" x2="300" y2="200"/>
    <line x1="60" y1="150" x2="60" y2="200"/>
    
    <!-- Bidirectional indicators -->
    <circle cx="170" cy="90" r="3" fill="#8b5cf6"/>
    <polygon points="167,90 170,87 173,90" fill="#8b5cf6"/>
    <polygon points="167,90 170,93 173,90" fill="#8b5cf6"/>
    
    <circle cx="430" cy="90" r="3" fill="#f59e0b"/>
    <polygon points="427,90 430,87 433,90" fill="#f59e0b"/>
    <polygon points="427,90 430,93 433,90" fill="#f59e0b"/>
  </g>
  
  <!-- Arrows for power flow -->
  <g fill="#374151">
    <polygon points="120,107 130,110 120,113"/>
    <polygon points="230,107 240,110 230,113"/>
    <polygon points="380,107 390,110 380,113"/>
    <polygon points="490,107 500,110 490,113"/>
    <polygon points="297,190 300,200 303,190"/>
  </g>
  
  <!-- Charge/Discharge indicators -->
  <text x="180" y="75" font-family="Arial, sans-serif" font-size="10" fill="#8b5cf6">
    ⇄ Bidirectional
  </text>
  
  <text x="420" y="75" font-family="Arial, sans-serif" font-size="10" fill="#f59e0b">
    ⇄ Grid Sync
  </text>
</svg>